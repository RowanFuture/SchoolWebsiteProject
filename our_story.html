<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>NPA website</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>

        <link rel="stylesheet" type="text/css" href="css/main_style.css">

        <link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/glacial-indifference" type="text/css"/>
    </head>
    <body>

      <div id="openStatus" class="screenOverlay">
          <div class="openStatusBox">LOADING</div>
          <button onclick="hideOpeningTimes()" style="width:100%; text-align:center; border:none; font-size:4rem; font-weight: 900; background:none; position: fixed; top:0; margin-top:calc(50vh + 10rem);">
          X</button>
      </div>

        <nav>
            <!-- <h2 id="logo">Cafe Esperanza</h2> -->
            <ul class="navlist">
              <li class="logopar"><a href="index.html" class="logo">Cafe Esperanza</a></li>
              <li><a href="contact.html" class="navbtn">Contact</a></li>
              <li><a href="our_story.html" class="navbtn activenav">Our Story</a></li>
              <li><a href="menu.html" class="navbtn">Menu</a></li>
              <li><a href="order.html" onmouseout="hideUndernavMessage()" onmouseover="showUndernavMessage('You can now order takeaway to come and pick up!')" class="ordernav navbtn">Order Now!</a></li>
            </ul>
            <div class="clear"></div>
            <div id="undernavpopup"></div>
        </nav>

        <div class='header'>
          <button class=' header_button smaller_text'>
            Subscribe to our newsletter!
          </button>
          <button onclick="showOpeningTimes()" class='header_button smaller_text'>
            Open 10 AM <br> to 8 PM
          </button>
        </div>

        <script>
          function hideOpeningTimes(){
              let id = document.getElementById('openStatus');
              id.classList.remove('fade_in');
              setTimeout(function(){
                  let id = document.getElementById('openStatus');
                  id.style.display = "none";
                  console.log('worked');
                  document.body.style['overflow-y'] = "scroll";
              }, 100);
          }
          function showOpeningTimes(){
            let id = document.getElementById('openStatus');
            id.style.display = "block";
            document.body.style['overflow-y'] = "hidden";
            setTimeout(function(){
                let id = document.getElementById('openStatus');
                id.classList.add('fade_in');
            }, 10);
            let d = new Date();
            let h = d.getHours();
            let m = d.getMinutes();
            let t = "";
            let s = "";
            if(h < 10){
                if(m == 0){
                    let v = 10-h; if(v > 1) s+= "s";
                    t = "Hey! The cafe opens in <br>"+v+" hour"+s+".";
                } else {
                    let v = 9-h; if(v > 1) s+= "s";
                    if(v == 0) t = "Hey! The cafe opens<br>in "+(60 - m)+" minutes.";
                    else t = "Hey! The cafe opens in <br>"+v+" hour"+s+" and "+(60 - m)+" minutes.";
                }
            } else if(h >= 20){
                t = "Sorry, <br> The cafe is now closed.";
            } else {
                let v = (20-Math.ceil(h+m/60)); if(v > 1) s+= "s";
                t = "The cafe is open!<br>We close in "+v+" hour"+s+".";
            }
            id.children[0].innerHTML = t;
          };
          function showUndernavMessage(x){
            let id = document.getElementById('undernavpopup');
            id.innerHTML = x;
            id.classList.add('undernav-visible');
          }
          function hideUndernavMessage(){
            let id = document.getElementById('undernavpopup');
            id.classList.remove('undernav-visible');
          }
        </script>

        <div class="linebreak"></div>

        <section style="position:relative;">
            <table style="padding:0px; width:100%; min-height:384px; margin-bottom:5rem; margin-top:2rem;">
                <td id="slideshow"></td>
                <td style="width:50%; font-size:2rem; padding:2rem; padding-right:5rem;">
                  <h1 id="slideshow_name"></h1>
                  <p id="slideshow_desc">This slideshow requires JavaScript to be enabled.</p>
                </td>
            </table>
            <div id="slideshow_left" onclick="slideshowLeft(); return false" style="width:2rem;height:2rem; position:absolute; bottom:calc(50% - 1.5rem); left:2rem; background-color:black; border:solid 0.5rem white; border-radius:2.5rem;"></div>
            <div id="slideshow_right" onclick="slideshowRight(); return false" style="width:2rem;height:2rem; position:absolute; bottom:calc(50% - 1.5rem); right:2rem; background-color:white; border:solid 0.5rem black; border-radius:2.5rem;"></div>
            <div style="font-size:6rem; text-align:center; padding:0px; margin:0px; position:absolute; bottom:-6rem; width:100%" id="slide_num"></div>
        </section>

        <script>

            var slide = document.getElementById('slideshow');
            var slideshow_desc = document.getElementById('slideshow_desc');
            var slideshow_name = document.getElementById('slideshow_name');
            var slideshow_left = document.getElementById('slideshow_left');
            var slideshow_right = document.getElementById('slideshow_right');
            var slide_num = document.getElementById('slide_num');

            var slideshow = [
              {
                name: "Our Ethos",
                desc: ".murobal tse di mina tillom tnuresed aiciffo iuq apluc ni tnus ,tnediorp non tatadipuc taceacco tnis ruetpecxE .rutairap allun taiguf ue erolod mullic esse tilev etatpulov ni tiredneherper ni rolod eruri etua siuD .tauqesnoc odommoc ae xe piuqila tu isin sirobal ocmallu noitaticrexe durtson siuq ,mainev minim da mine tU .auqila angam erolod te erobal tu tnudidicni ropmet domsuie od des ,tile gnicsipida rutetcesnoc ,tema tis rolod muspi meroL",
                image: "rainforest",
              },
              {
                name: "Our Story",
                desc: "dasdasfsergerggdgdbfgngkl gf jiosdj rl;asfbjdf asdtiyfgbfdyt [gh]",
                image: 'jungle',
              },
            ];
            // var slideshow_names = ["Our Ethos","Our Story"];
            // var slideshow_descriptions = [,"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."]
            // var slideshow_images = ['rainforest','jungle'];

            var slideshow_sel = 0;

            function updateSlideshow(){
              slide_num.innerHTML = "";
              for(var i = 0; i < slideshow.length; i++){
                if(i === slideshow_sel) _t = "●";
                else _t = "○";
                slide_num.innerHTML += '<span onclick="slideshow_sel = '+i+'; updateSlideshow(); return false">'+_t+'</span>';
                console.log(i);
              }
              console.log(slideshow[slideshow_sel]);
              slideshow_name.innerHTML = slideshow[slideshow_sel].name;
              slideshow_desc.innerHTML = slideshow[slideshow_sel].desc;
              slide.style.backgroundImage = "url(./images/"+slideshow[slideshow_sel].image+".jpeg)";
            }

            function slideshowLeft(){
              slideshow_sel--;
              slideshow_sel = Math.min(Math.max(slideshow_sel,0),slideshow.length-1);
              updateSlideshow();
            }

            function slideshowRight(){
              slideshow_sel++;
              slideshow_sel = Math.min(Math.max(slideshow_sel,0),slideshow.length-1);
              updateSlideshow();
            }

            function loadSlideshow(){
              updateSlideshow();
              console.log('Slideshow Is Working');
              // slideshow_left.addEventListener("click", slideshowLeft());
              // slideshow_right.addEventListener("click", slideshowRight());
            }

            document.onLoad = loadSlideshow();
        </script>

        <br>

        <footer>
            <ul class="navlist">
                <li><a href="https://twitter.com/">Twitter</a></li>
                <li><a href="https://facebook.com/">Facebook</a></li>
                <li><a href="https://instagram.com/">Instagram</a></li>
            </ul>
            <div class="bottom_footer">
                <p>&copy 2018 Cafe Esperanza</p>
            </div>
        </footer>
    </body>
</html>
