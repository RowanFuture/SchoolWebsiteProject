<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>NPA website</title>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js" integrity="sha384-THVO/sM0mFD9h7dfSndI6TS0PgAGavwKvB5hAxRRvc0o9cPLohB0wb/PTA7LdUHs" crossorigin="anonymous"></script>

        <link rel="stylesheet" type="text/css" href="css/main_style.css">

        <link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/glacial-indifference" type="text/css"/>
    </head>
    <body>

        <div id="openStatus" class="screenOverlay">
            <div style="border-radius: 20rem; width:45rem; padding-top:15rem; padding-bottom:17rem; font-size:4rem; background-color:white; margin:auto; margin-top:calc(50vh - 20rem); text-align:center">
            LOADING</div>
            <button onclick="hideOpeningTimes()" style="width:100%; text-align:center; border:none; font-size:4rem; font-weight: 900; background:none; position: fixed; top:0; margin-top:calc(50vh + 10rem);">
            X</button>
        </div>

        <nav>
            <h2 id="logo">Cafe Esperanza</h2>
            <ul class="navlist">
                <li><a href="index.html">Home</a></li>
                <li><a href="menu.html">Menu</a></li>
                <li><a href="our_story.html">Our Story</a></li>
                <li><a href="contact.html" class="activenav">Contact</a></li>
                <li><a href="order.html">Order</a></li>
            </ul>
            <div class="clear"></div>
        </nav>

        <div class='header'>
            <button class=' header_button'>
                Order Now
            </button>
            <button onclick="showOpeningTimes()" class='header_button smaller_text'>
                Open 10 AM <br> to 8 PM
            </button>
            <button class=' header_button smaller_text'>
                Subscribe to our newsletter!
            </button>
        </div>

                <script>
                function hideOpeningTimes(){
                    let id = document.getElementById('openStatus');
                    id.classList.remove('fade_in');
                    setTimeout(function(){
                        let id = document.getElementById('openStatus');
                        id.style.display = "none";
                        console.log('worked');
                        document.body.style['overflow-y'] = "scroll";
                    }, 100);
                }
                  function showOpeningTimes(){
                    let id = document.getElementById('openStatus');
                    id.style.display = "block";
                    document.body.style['overflow-y'] = "hidden";
                    setTimeout(function(){
                        let id = document.getElementById('openStatus');
                        id.classList.add('fade_in');
                    }, 10);
                    $.getJSON('http://api.timezonedb.com/v2.1/get-time-zone?key=D2KQ6AOF1Z60&format=json&by=zone&zone=GMT', function( data ) {
                        //let d = new Date(data.formatted);
                        let d = new Date();
                        // console.log(d);
                        // let h = d.getHours();
                        let h = d.getHours();
                        let m = d.getMinutes();
                        let t = "";
                        let s = "";
                        if(h < 10){
                            if(m == 0){
                                let v = 10-h; if(v > 1) s+= "s";
                                t = "Hey! The cafe opens in <br>"+v+" hour"+s+".";
                            } else {
                                let v = 9-h; if(v > 1) s+= "s";
                                if(v == 0) t = "Hey! The cafe opens<br>in "+(60 - m)+" minutes.";
                                else t = "Hey! The cafe opens in <br>"+v+" hour"+s+" and "+(60 - m)+" minutes.";
                            }
                        } else if(h >= 20){
                            t = "Sorry, <br> The cafe is now closed.";
                        } else {
                            let v = (20-Math.ceil(h+m/60)); if(v > 1) s+= "s";
                            t = "The cafe is open!<br>We close in "+v+" hour"+s+".";
                        }
                        id.children[0].innerHTML = t;
                    });
                  };
                </script>

        <br>

        <section>
            <table class="maptable">
                <td><iframe class="map" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=2+silver+street+hawick&amp;sll=37.0625,-95.677068&amp;sspn=32.38984,55.458984&amp;ie=UTF8&amp;hq=&amp;hnear=2+Silver+St,+the+Scottish+Borders,+The+Scottish+Borders+TD9+0,+United+Kingdom&amp;ll=55.421098,-2.78924&amp;spn=0.004871,0.012832&amp;z=15&amp;iwloc=A&amp;output=embed"></iframe></td>
                <td class="mapinfo">
                    <table>
                        <tr>
                            <td>phone</td>
                            <td>07707856123</td>
                        </tr>
                        <tr>
                            <td>email</td>
                            <td>damascus_drum@yahoo.com</td>
                        </tr>
                        <tr>
                            <td>address</td>
                            <td>2 silver street</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>Hawick</td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>TD9 0AD</td>
                        </tr>
                    </table>
                </td>
            </table>
        </section>

        <br>

        <footer>
            <ul class="navlist">
                <li><a href="https://twitter.com/">Twitter</a></li>
                <li><a href="https://twitter.com/">Twitter</a></li>
                <li><a href="https://twitter.com/">Twitter</a></li>
                <li><a href="https://twitter.com/">Twitter</a></li>
            </ul>
            <div class="bottom_footer">
                <p>&copy 2018 Cafe Esperanza</p>
            </div>
        </footer>
    </body>
</html>
